# ⚡ N8N工作流参数修改速查表

## 🔴 必须修改的参数（10处）

### 1. Webhook接收节点

```
位置: 节点设置 → Path
当前值: ai-clothing
修改为: 你想要的路径（可选，保持默认也可）
```

### 2. AI生成-场景生图节点

```javascript
// 代码第2行
AI_API_URL = 'https://your-ai-api.com/generate'
           ↓
修改为: 你的AI API地址

// 代码第3行
AI_API_KEY = 'your-api-key-here'
            ↓
修改为: 你的API密钥

// 代码第10行
model: 'FLUX.1'
       ↓
修改为: 你的模型ID
```

### 3. AI生成-虚拟试衣节点

```javascript
// 代码第2行
TRYON_API_URL = 'https://your-tryon-api.com/generate'
               ↓
修改为: 你的虚拟试衣API地址

// 代码第3行
TRYON_API_KEY = 'your-tryon-api-key-here'
                ↓
修改为: 你的虚拟试衣API密钥

// 代码第10行
model: 'VITON'
       ↓
修改为: 你的虚拟试衣模型ID
```

### 4. 上传结果图节点

```javascript
// 代码第2行
UPLOAD_API_URL = 'https://api.deerapi.com/upload'
                ↓
修改为: 你的图床API地址

// 代码第3行
UPLOAD_API_KEY = 'your-deerapi-key-here'
                 ↓
修改为: 你的图床API密钥
```

### 5. 回调通知节点

```
位置: URL字段
当前值: http://your-domain.com/api/webhooks/n8n/callback
修改为: 你的实际回调地址
```

---

## 🟡 可选修改的参数（2处）

### 6. Webhook认证

```
位置: Webhook接收节点 → Authentication
建议: 添加Header Auth验证
```

### 7. 回调认证

```
位置: 回调通知节点 → Headers
建议: 添加X-Callback-Token验证
```

---

## 📋 修改步骤清单

1. [ ] 导入工作流JSON文件
2. [ ] 复制Webhook URL
3. [ ] 更新项目 `.env.local` 文件中的 `N8N_WEBHOOK_URL`
4. [ ] 修改"AI生成-场景生图"节点的API配置
5. [ ] 修改"AI生成-虚拟试衣"节点的API配置
6. [ ] 修改"上传结果图"节点的API配置
7. [ ] 修改"回调通知"节点的URL
8. [ ] 检查所有连线是否正确
9. [ ] 激活工作流
10. [ ] 发送测试请求验证

---

## 🔍 快速定位需要修改的节点

导入工作流后，搜索以下节点名称：

| 节点名称                    | 包含"【修改】"标记 | 需要修改    |
| --------------------------- | ------------------ | ----------- |
| 【修改】Webhook接收         | ✅                 | Webhook URL |
| 提取请求参数                | ❌                 | 否          |
| 判断：场景生图？            | ❌                 | 否          |
| 判断：虚拟试衣？            | ❌                 | 否          |
| 下载商品图                  | ❌                 | 否          |
| 下载场景图                  | ❌                 | 否          |
| **【修改】AI生成-场景生图** | **✅**             | **API配置** |
| 下载模特图                  | ❌                 | 否          |
| 下载服装图                  | ❌                 | 否          |
| **【修改】AI生成-虚拟试衣** | **✅**             | **API配置** |
| **【修改】上传结果图**      | **✅**             | **API配置** |
| **【修改】回调通知**        | **✅**             | **URL**     |
| Webhook响应                 | ❌                 | 否          |
| 设置错误-不支持的模式       | ❌                 | 否          |

**提示：** 所有需要修改的节点名称都包含 **【修改】** 标记

---

## 🧪 快速测试

### 最简单的测试命令（无需真实图片）

```bash
# 使用占位符图片URL测试
curl -X POST YOUR_N8N_WEBHOOK_URL \
  -H "Content-Type: application/json" \
  -d '{
    "mode": "scene",
    "taskId": "test-001",
    "userId": "test-user",
    "productImageUrl": "https://picsum.photos/300/300",
    "sceneImageUrl": "https://picsum.photos/301/301",
    "prompt": "测试"
  }'
```

---

## 📞 需要帮助？

如果遇到问题，查看详细文档：

- **完整配置指南**: `docs/N8N工作流详细配置指南.md`
- **工作流JSON**: `docs/n8n-workflows/AI服装平台-双轨工作流-最终版.json`

---

_速查表版本: v1.0.0_
_创建时间: 2026-01-29_

# AI服装平台 - 文档导航中心

> **最后更新**：2026-01-29
> **文档状态**：已整理完成

---

## 🗺️ 项目导航图

> **AI 请依据此地图定位文件，不要进行全盘扫描。**

### 目录结构映射

| 目录                    | 用途                               | 注意事项                                      |
| ----------------------- | ---------------------------------- | --------------------------------------------- |
| `src/app/`              | Next.js App Router 页面和 API 路由 | 页面组件限 250 行，超标需拆分                 |
| `src/lib/services/`     | 核心业务逻辑服务层                 | 修改需谨慎，包含 n8n、feishu、task 等核心服务 |
| `src/lib/repositories/` | 数据访问层（Prisma）               | 封装数据库操作，优先复用                      |
| `src/lib/utils/`        | 通用工具库                         | 优先复用，避免重复造轮子                      |
| `src/lib/prompts/`      | AI 提示词模板                      | 提示词优化相关配置                            |
| `src/components/`       | React 组件                         | 按功能分类（workspace/、settings/、ui/）      |
| `src/hooks/`            | 自定义 React Hooks                 | 状态管理封装                                  |
| `prisma/`               | 数据库 Schema 和迁移               | Schema 定义、迁移文件                         |
| `.clauderules`          | 项目宪法                           | 架构决策、凭证管理、开发规范                  |

### 关键入口

| 类型              | 路径                   | 说明                                              |
| ----------------- | ---------------------- | ------------------------------------------------- |
| **环境变量示例**  | `.env.example`         | 必需的环境变量清单                                |
| **数据库 Schema** | `prisma/schema.prisma` | 数据模型定义（Task、User、PromptConversation 等） |
| **项目宪法**      | `.clauderules`         | 核心架构决策和开发规范                            |
| **主入口**        | `src/app/page.tsx`     | 主工作区页面（Bento Grid 布局）                   |

### 扫描优先级

```
高优先级（优先扫描）:
  .clauderules
  docs/README.md (本文件)
  prisma/schema.prisma

中优先级（按需扫描）:
  src/lib/services/
  src/lib/repositories/
  src/app/api/

低优先级（谨慎扫描）:
  src/components/ui/ (通用组件，除非明确需要)
```

---

---

## 📚 目录结构

```
docs/
├── README.md                                    # 📚 本文件 - 文档导航中心（AI和人类都要看）
│
├── 00-架构设计/                                 # 🏗️ 核心架构决策和设计文档
│   ├── 三端联动验证指南.md                     #    前端-N8N-飞书三端联动测试
│   ├── 三端字段映射表.md                       #    前端、N8N、飞书字段对应关系
│   └── 业务逻辑深度分析-双轨架构重新设计.md     #    当前双轨并行架构设计说明
│
├── 01-配置指南/                                 # 🔧 具体配置步骤和操作指南
│   ├── AI提示词优化-实施检查清单.md            #    AI提示词优化功能检查清单
│   ├── AI提示词优化-完整配置指南.md            #    AI提示词优化功能配置教程
│   ├── AI提示词优化-遗漏分析与补充说明.md      #    AI优化功能补充说明
│   ├── N8N工作流配置指南.md                    #    N8N基础配置说明
│   ├── 双轨工作流配置指南-v2.md                #    N8N双工作流完整配置指南（重要）
│   ├── 参数修改速查表.md                       #    常用参数快速修改参考
│   ├── 完整配置指南-小白版.md                  #    新手完整配置教程
│   ├── 数据库验证指南.md                       #    数据库连接验证
│   └── 飞书表格-完整配置教程.md                #    飞书多维表格详细配置
│
├── 02-工作流文件/                               # ⚙️ N8N工作流JSON文件（直接导入使用）
│   ├── AI服装平台-前端触发-同步飞书.json       #    前端触发工作流：Webhook接收 → AI生成 → 创建飞书记录
│   └── AI服装平台-飞书触发-独立流程.json       #    飞书触发工作流：飞书按钮 → AI生成 → 更新飞书记录
│
├── 03-开发记录/                                 # 📝 开发历史记录（按日期倒序）
│   ├── SESSION-总结-2026-01-29.md             #    本次Session总结，规划并完成文档整理
│   ├── 问题修复记录-2026-01-29.md             #    问题修复记录
│   ├── 开发进度-2026-01-29.md                 #    开发进度记录
│   └── 测试流程-模式选择器.md                 #    模式选择器测试流程
│
└── 99-历史归档/                                 # 🗄️ 已过时或废弃的文档（仅供参考）
    └── _废弃文档/                              #    包含30+个过时文件（合并工作流、旧版配置等）
```

### 目录用途速查

| 目录编号 | 名称       | 用途                           | 举例                         |
| -------- | ---------- | ------------------------------ | ---------------------------- |
| 00       | 架构设计   | 存放核心架构决策和设计文档     | 双轨架构设计、字段映射       |
| 01       | 配置指南   | 存放具体配置步骤和操作指南     | N8N配置、飞书表格配置        |
| 02       | 工作流文件 | 存放所有N8N JSON导出文件       | 前端触发.json、飞书触发.json |
| 03       | 开发记录   | 存放开发历史记录（按日期命名） | SESSION总结、问题修复记录    |
| 99       | 历史归档   | 存放过时废弃文档               | 旧版配置、合并工作流文档     |

---

## 🎯 快速导航

### 核心文档（必读）

| 文档               | 位置                                               | 说明                         |
| ------------------ | -------------------------------------------------- | ---------------------------- |
| **项目宪法**       | 项目根目录 `.clauderules`                          | 架构决策、凭证管理、开发规范 |
| **双轨工作流架构** | `00-架构设计/业务逻辑深度分析-双轨架构重新设计.md` | 当前架构设计说明             |
| **三端字段映射**   | `00-架构设计/三端字段映射表.md`                    | 前端-N8N-飞书字段对应关系    |

### 配置指南（按需查阅）

| 任务          | 查阅文档                                   |
| ------------- | ------------------------------------------ |
| N8N工作流配置 | `01-配置指南/双轨工作流配置指南-v2.md`     |
| 飞书表格设置  | `01-配置指南/飞书表格-完整配置教程.md`     |
| 前端环境变量  | `01-配置指南/完整配置指南-小白版.md`       |
| 参数修改速查  | `01-配置指南/参数修改速查表.md`            |
| AI提示词优化  | `01-配置指南/AI提示词优化-完整配置指南.md` |

### 工作流文件（导入N8N）

| 文件                                              | 用途           |
| ------------------------------------------------- | -------------- |
| `02-工作流文件/AI服装平台-前端触发-同步飞书.json` | 前端触发工作流 |
| `02-工作流文件/AI服装平台-飞书触发-独立流程.json` | 飞书触发工作流 |

---

## 📖 各目录详细说明

### 00-架构设计/

核心架构决策和设计文档。

| 文件                                 | 状态    | 说明                            |
| ------------------------------------ | ------- | ------------------------------- |
| 业务逻辑深度分析-双轨架构重新设计.md | ✅ 有效 | 当前架构设计，解释双轨并行逻辑  |
| 三端字段映射表.md                    | ✅ 有效 | 前端、N8N、飞书三端字段对应关系 |
| 三端联动验证指南.md                  | ✅ 有效 | 三端联动测试验证步骤            |

### 01-配置指南/

具体配置步骤和操作指南。

| 文件                               | 状态    | 说明                    |
| ---------------------------------- | ------- | ----------------------- |
| 双轨工作流配置指南-v2.md           | ✅ 有效 | N8N双工作流完整配置指南 |
| N8N工作流配置指南.md               | ✅ 有效 | N8N基础配置说明         |
| 参数修改速查表.md                  | ✅ 有效 | 常用参数快速修改参考    |
| 飞书表格-完整配置教程.md           | ✅ 有效 | 飞书多维表格详细配置    |
| 数据库验证指南.md                  | ✅ 有效 | 数据库连接验证          |
| 完整配置指南-小白版.md             | ✅ 有效 | 新手完整配置教程        |
| AI提示词优化-完整配置指南.md       | ✅ 有效 | AI提示词优化功能配置    |
| AI提示词优化-实施检查清单.md       | ✅ 有效 | AI优化功能检查清单      |
| AI提示词优化-遗漏分析与补充说明.md | ✅ 有效 | AI优化补充说明          |

### 02-工作流文件/

N8N工作流JSON文件，直接导入使用。

| 文件                              | 状态    | 说明                             |
| --------------------------------- | ------- | -------------------------------- |
| AI服装平台-前端触发-同步飞书.json | ✅ 有效 | 前端触发 → AI生成 → 创建飞书记录 |
| AI服装平台-飞书触发-独立流程.json | ✅ 有效 | 飞书触发 → AI生成 → 更新飞书记录 |

**重要**：必须使用2个独立的工作流，不能合并！

### 03-开发记录/

开发过程中的历史记录，按时间倒序排列。

| 文件                       | 日期       | 说明                          |
| -------------------------- | ---------- | ----------------------------- |
| SESSION-总结-2026-01-29.md | 2026-01-29 | 本次Session总结，规划文档整理 |
| 问题修复记录-2026-01-29.md | 2026-01-29 | 问题修复记录                  |
| 开发进度-2026-01-29.md     | 2026-01-29 | 开发进度记录                  |
| 测试流程-模式选择器.md     | 2026-01-29 | 模式选择器测试流程            |

### 99-历史归档/

已过时或废弃的文档，仅供参考。

**包含内容**：

- 合并工作流相关文档（已废弃）
- 旧版配置指南
- 历史需求文档
- 旧版实施计划

> ⚠️ **注意**：归档文档可能包含过时的架构设计，请勿参考！

---

## 🔍 文档状态说明

| 状态      | 含义               |
| --------- | ------------------ |
| ✅ 有效   | 当前使用，内容准确 |
| ⏳ 待验证 | 需要进一步确认     |
| 🗑️ 已归档 | 已过时，仅供参考   |

---

## 📝 文档管理规范

### 命名规范

- 架构文档：`功能-架构.md`
- 配置指南：`系统-配置指南.md`
- 工作流：`轨道-触发方式-功能描述.json`
- 开发记录：`YYYY-MM-DD-任务描述.md`

### 版本管理

- ✅ 文档更新时，直接替换旧文件（不创建副本）
- ✅ 重大变更才增加版本号后缀（如-v2）
- ✅ 过时文档立即移到 `99-历史归档/`

### 新增文档流程

1. 确定文档类型（架构/配置/记录）
2. 放入对应目录
3. 更新本README索引
4. 如有过时版本，移至归档

---

## 🚨 重要提醒

### 架构决策（.clauderules）

项目的核心决策记录在项目根目录的 `.clauderules` 文件中：

- 双轨架构（2个独立工作流）
- 飞书表格10个字段
- 凭证管理策略
- 开发规范

**每次开始工作前，请先阅读 `.clauderules`！**

### 常见错误

- ❌ 创建合并工作流 → ✅ 必须创建2个独立工作流
- ❌ 假设飞书表格有13个字段 → ✅ 实际只有10个字段
- ❌ 在前端配置DeerAPI → ✅ DeerAPI仅在N8N配置

---

_文档整理时间：2026-01-29_
_下次审查时间：需要时更新_
